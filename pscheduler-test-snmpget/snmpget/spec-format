#!/usr/bin/env python3
#
# Format an snmpget test spec
#

import pscheduler

from validate import spec_is_valid
from validate import MAX_SCHEMA

TEMPLATE='''
{% if _mime_type == 'text/plain' %}

Host ............... {{ unspec(host) }}
Host Node .......... {{ unspec(hostnode) }}
Destination ........ {{ unspec(dest) }}
Version ............ {{ unspec(version) }}
Polls .............. {{ unspec(polls) }}
Period ............. {{ unspec(period) }}
OID ................ {{ oid | join(", ") }}
Protocol ........... {{ unspec(protocol) }}
Timeout ............ {{ unspec(timeout) }}
{%- if version == '3' -%}
Security Name ...... {{ unspec(securityname) }}
Auth Protocol ...... {{ unspec(authprotocol) }}
Privacy Protocol ... {{ unspec(privprotocol) }}
Security Level ..... {{ unspec(securitylevel) }}
Context .............{{ unspec(context) }}
{%- endif -%}

{% elif _mime_type == 'text/html' %}

# TODO HTML
<table>
</table>

{% else %}

{{ error('Unsupported MIME type "' + _mime_type + '"') }}

{% endif %}
'''

pscheduler.spec_format_method(TEMPLATE, max_schema=MAX_SCHEMA, validator=spec_is_valid)
